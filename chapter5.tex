\documentclass[dvipdfmx]{jsarticle}

\input{preamble}

\begin{document}
    \begin{problem}
        $V(J) \subseteq B$を閉集合として, $f^\ast(V(J)) = V(f^{-1}(J))$を示す.
        $\mathfrak{p} \in f^{\ast}(V(J))$とすれば, ある$\mathfrak{q} \in V(J)$が存在して,
        \[
            f^{\ast}(\mathfrak{q}) = f^{-1}(\mathfrak{q}) = \mathfrak{p}
        \]
        となる.
        今, $J \subseteq \mathfrak{q}$より, $f^{-1}(J) \subseteq f^{-1}(\mathfrak{q}) = \mathfrak{p}$なので,
        $\mathfrak{p} \in V(f^{-1}(J))$が成り立つ.
        あとは$V(f^{-1}(J)) \subseteq f^{\ast}(V(J))$を示せばよいが,
        これは$f^{\ast}$の制限によって$\Spec{B/J} \to \Spec{A/f^{-1}(J)}$が全射であることと同値である.

        まず, $f$がintegralであることと(5.6)より, $\iota: f(A) \to B$を包含射とすれば,
        $B/J$は$f(A)/\iota^{-1}(J)$上整である.
        また, $f(A)/\iota^{-1}(J) \subseteq B/J$とみれば, (5.10)より,
        \[
            \Spec{B/J} \to \Spec{f(A)/\iota^{-1}(J)}
        \]
        は全射である.
        ここで, $f(A) \cong A/\ker{f}$と$f^{-1}(\iota^{-1}(J)) = f^{-1}(J)$を考えれば,
        \[
            f(A)/\iota^{-1}(J) \cong (A/\ker{f})/(f^{-1}(J)/\ker{f}) \cong A/f^{-1}(J)
        \]
        となるので,
        \[
            \begin{tikzcd}
                A \arrow[r]\arrow[d] & B  \arrow[d] \\
                A/f^{-1}(J) \arrow[r] &  B/J
            \end{tikzcd}
        \]
        が可換であることから,
        \[
            \begin{tikzcd}
                \Spec{B/J} \arrow[r]\arrow[d] & \Spec{A/f^{-1}(J)}   \arrow[d] \\
                \Spec{B} \arrow[r] & \Spec{A}
            \end{tikzcd}
        \]
        も可換であることに注意すれば,
        $f^{\ast}$の制限によって$\Spec{B/J} \to \Spec{A/f^{-1}(J)}$が全射であることが従う.
    \end{problem}

    \begin{problem}
        $\mathfrak{p} = \ker{f}$とする.
        (5.10)より, ある$\mathfrak{q}$が存在して, $\mathfrak{p} = \mathfrak{q} \cap A$が成り立つ.
        このとき,
        \[
            \begin{tikzcd}
                A \arrow[r]\arrow[d] & B  \arrow[d] \\
                A/\mathfrak{p} \arrow[r, "\iota_0"] &  B/\mathfrak{q}
            \end{tikzcd}
        \]
        が可換であり, $\iota_0$が単射なので, $A/\mathfrak{p} \subseteq B/\mathfrak{q}$としてよい.
        (5.6)より, これは整拡大である.
        また, $A/\mathfrak{p}, B/\mathfrak{q}$がともに整域であることから,
        $K(A/\mathfrak{p}) \subseteq K(B/\mathfrak{q})$は代数的拡大になる.
        さらに, $f(A) \cong A/\ker{f}$であることから, $K(f(A)) \subseteq K(B/\mathfrak{q})$とみれば,
        $K(f(A)) \subseteq \Omega$でもあるので, $K(B) \subseteq \Omega$とみなせる.
    \end{problem}

    \begin{problem}
        $D \subseteq B' \otimes_A C$を$(f\otimes_A 1)(B \otimes C)$上整な元の集合とすれば,
        (5.3)より, $B'\otimes_A C$の部分環である.
        また, $B, C$が$A$-代数であることと, $f$が代数準同型であることから,
        $x \otimes y \in B'\otimes_A C$が$(f\otimes_A 1)(B \otimes C)$
        上整であることを示せば, 十分である.
        ここで, $x$は$f(B)$上整なので, $b^n = 1$とすれば, ある$b_i \in B'$が存在して,
        \[
            \sum_{i = 0}^n b_ix^i = 0
        \]
        となる.
        このとき,
        \[
            \sum_{i = 0}^n (b_i \otimes y^{n-i})(x\otimes y) = \sum_{i=0}^n ((b_ix)\otimes y^n) = \qty(\sum_{i = 0}^n b_ix^i)\otimes y^n = 0
        \]
        となるので, $x\otimes y \in B'\otimes_A C$は$B\otimes_A C$上整である.
    \end{problem}

    \begin{problem}
        $A = k[x^2-1], B = k[x], \mathfrak{n} = (x-1)B$とする.
        このとき,
        \[
           \mathfrak{m} =  A \cap (x-1)B = (x^2-1)A
        \]
        となることに注意する.

        $1/(x+1)$が$A_{\mathfrak{m}}$上整と仮定する.
        このとき, $a_0 = 1$となるようなある$a_i \in A$と$s_i \in A \setminus \mathfrak{m}$が存在して,
        \[
            \sum_{i = 0}^n a_is_i(x-1)^i = 0
        \]
        が成り立つ.
        このとき, $s_0 \in (x-1) \cap A = \mathfrak{m}$となるが, これは矛盾.
    \end{problem}

    \begin{problem}
        \begin{enumerate}
            \item  $x$の$B$における逆元を$y \in B$とする.
            $B$は$A$上整なので, $a_i \in A$が存在して,
            \[
                y^n + \cdots + a_{n-1}y + a_n = 0
            \]
            となるが, $n = 1$のときには$y = a_1 \in A$なので, 成り立つ.
            次に, $n-1$のときには, 主張が成り立つと仮定する.
            \[
                -xa_n = y^{n-1} + \cdots + a_{n-1}
            \]
            なので, $a_{n-1}$を$-xa_n$でおきなおせば,
            \[
                y^{n-1} + \cdots + a_{n_1} = 0
            \]
            となる.
            帰納法の仮定より, $y \in A$が成り立つ.
            ゆえに, $x$は$A$においても単元.
            \item (5.10)より, 縮約による全射$\Spec{B} \to \Spec{A}$が存在するが,
            特に縮約による全射$\Max{B} \to \Max{A}$も存在するので, 共通部分の逆像が逆像の共通部分であることから, 主張が成り立つ.
        \end{enumerate}
    \end{problem}

    \begin{problem}
        $f_i: A \to B_i$を環の射とし, $f = (f_1, \dots, f_n): A \to \prod_{i = 1}^n B_i$としたとき,
        $\prod_{i = 1}^n B_i$が$f(A)$上整であることを示す.
        $b = (b_1, \dots, b_n) \in \prod_{i = 1}^n B_i$とする.
        $B/f_i(A)$が整拡大なので,
        任意の$i$に対して, ある$n_i$と$a_{i,j} \in f_i(A)$が存在して,
        \[
            b_i^{n_i} + a_{i,1}b_i^{n_i-1} + \cdots a_{i,n_1} = 0
        \]
        が成り立つ.
        ここで, $n = \max_i{n_i}$として,
        \[
            b_i^{n} + a_{i,1}b_i^{n-1} + \cdots a_{i,n} = 0
        \]
        とみる.
        ただし, $n_i < k \leq n$に対しては, $a_{i,k} = 0$である.
        このとき, $a_j = (a_{1,j}, \dots, a_{n,j}) \in f(A)$とすれば,
        \[
            b^n+ a_1 b^{n-1} + \cdots + a_n = 0
        \]
        となるので, 主著うは成り立つ.
    \end{problem}

    \begin{problem}
        $b \in B$が$A$上整のときに, $b \in A$となることを示せばよい.
        $a_i \in A$として,
        \[
            b^n + a_1b^{n-1} + \cdots + a_n = 0
        \]
        とおく.
        $n = 1$のときには$b = -a_1 \in A$なので成り立つ.
        $n-1$のときに主張が成つと仮定して, $n$の場合を示す.
        \[
            b(b^{n-1} + a_1b^{n-2} + \cdots + a_{n-1}) = -a_n \in A
        \]
        であり,
        $B \setminus A$が積閉であるから, $b \notin A$または
        \[
            b^{n-1} + a_1b^{n-2} + \cdots + a_{n-1} \in A
        \]
        となる.
        しかし, 後者の場合にも$a_{n-1}$を適当におきかえれば, 帰納法の仮定より, $b \in A$が成り立つので,
        主張は成立する.
    \end{problem}

    \begin{problem}
        \begin{enumerate}
            \item $B$が整域であることから, $f,g \in B[X] \subseteq \Quot{B}[X]$であり,
            $fg$の最小分解体$L$が存在する.
            このとき, 体は特に整域であることから, ある$\alpha_i, \beta_i \in L$が存在して,
            \[
                f(x) = (x-\alpha_1)\cdots (x-\alpha_n), \quad \quad g(x) = (x-\beta_1)\cdots (x-\beta_m)
            \]
            が$L[X]$において成り立つ.
            ここで, $fg \in C[X]$より, $\alpha_i, \beta_i$は$C$上整なので, $A$上整である.
            また, 整元の積と和はまた整元なので, $f, g \in C[X]$が成り立つ.
            \item 任意の環に対して, それを係数にもつ多項式の根を少なくとも一つむような拡大環は存在するので,
            これを繰り返すことにより, i)と同様に成り立つ.
        \end{enumerate}
    \end{problem}

    \begin{note}
        $\mathfrak{q} \in \Spec{B}$で$A/A\cap\mathfrak{q} \subseteq B/\mathfrak{q}$とみて～という
        方針では厳しそう。
    \end{note}

    \begin{problem}
        $f \in B[X]$を$A[X]$上整な元としたとき, $f \in C[X]$であることを示せばよい.
        仮定より, ある$g_i \in A[X]$が存在して,
        \[
            f^n + g_1 f^{n-1} + \cdots + g_n = 0
        \]
        となる.
        $r := \max_i(n, \deg{g_i}) + 1$として, $f' = f - x^r$
        とすれば, $\deg{f} = r$であって,
        \[
            (f' + x^r)^n + g_1 (f' + x^r)^{n-1} + \cdots + g_n = 0
        \]
        を満たす.
        これを展開すれば,
        \[
            f'^n + h_1f'^{n-1} + \cdots + h_n = 0
        \]
        となる.
        ただし, $h_n$は$\deg{h_n} = rn$をみたすモニック多項式である.
        このとき, $-f'$はモニックであって,
        \[
            -f'(f'^{n-1} + h_1f'^{n-2} + \cdots + h_{n-1}) = h_n
        \]
        なので, $f'^{n-1} + h_1f'^{n-2} + \cdots + h_{n-1}$もモニック多項式である.
        ここで, $h_n \in A[X] \subseteq C[X]$なので, 5.8より,
        特に$-f' \in C[X]$が成り立つ.
        したがって, $f \in C[X]$である.
        以上より, $C[X]$は$A[X]$の$B[X]$における整閉包である.
    \end{problem}

    \begin{problem}
        \begin{enumerate}
            $f$を分解して, $\iota: f(A) \to B$, $g: A \to f(A)$とする.
            \item \begin{description}
                \item[(a)$\Rightarrow$(b)]
                $\mathfrak{p} \in f(A)$と
                $\mathfrak{q} \in \Spec{B}$を$\mathfrak{q} \cap f(A) = \mathfrak{p}$が成り立つような
                ものとしたとき, $\iota^\ast|_{V(\mathfrak{q})}: V(\mathfrak{q}) \to V(\mathfrak{p})$が全射であることを示せばよい.
                $\mathfrak{p}' \in V(\mathfrak{p}) = V(\iota^{\ast}(\mathfrak{q}))$
                をとる.
                このとき, $\iota^{\ast}(\mathfrak{q}) \subseteq \mathfrak{p}'$なので,
                \[
                    g^\ast\circ \iota^\ast(\mathfrak{q}) = f^\ast(\mathfrak{q}) \subseteq g^\ast(\mathfrak{p}')
                \]
                が成り立つ.
                つまり, $g^\ast(\mathfrak{p'}) \in V(f^\ast(\mathfrak{q}))$である.
                ここで, $f^\ast$が閉であることから,
                \[
                    V(f^\ast(\mathfrak{q})) = f^\ast(V(\mathfrak{q}))
                \]
                が成り立つ.
                これより, ある$\mathfrak{q}' \in V(\mathfrak{q})$が存在して,
                $f^\ast(\mathfrak{q}') = g^\ast(\mathfrak{p}')$となる.
                $g$は全射なので,
                \[
                    \mathfrak{p}' = g(g^{\ast}(\mathfrak{p}')) = g(f^{\ast}(\mathfrak{q}')) = g(g^{-1}(\iota^\ast(\mathfrak{q}')))= \iota^\ast(\mathfrak{q}')
                \]
                となり, $f$は上昇性質をもつ.
                \item[(b)$\Rightarrow$(c)]
                \[
                    \Spec{B/\mathfrak{q}} \to \Spec{f(A)/\iota^{-1}(\mathfrak{q})} \to \Spec{A/f^{-1}(\mathfrak{q})}
                \]
                と分解して考える.
                まず, $\Spec{B/\mathfrak{q}} \to \Spec{f(A)/\iota^{-1}(\mathfrak{q})}$については,
                $f$の上昇性質からすぐに全射であることが従う.
                $\Spec{f(A)/\iota^{-1}(\mathfrak{q})} \to \Spec{A/f^{-1}(\mathfrak{q})}$
                が全射であることを示すには,
                特に$g^\ast|_{V(\iota^{-1}(\mathfrak{q}))}: V(\iota^{-1}(\mathfrak{q})) \to V(f^{-1}(\mathfrak{q}))$
                を示せば十分である.
                ここで, $\mathfrak{p} = \iota^{-1}(\mathfrak{q})$
                とすれば, $g^\ast|_{V(\mathfrak{p})}: V(\mathfrak{p}) \to V(g^{-1}(\mathfrak{p}))$
                であり, $f(A) = A/\ker{f}$なので, 剰余環におけるイデアルの対応関係から, $g^\ast|_{V(\iota^{-1}(\mathfrak{q}))}$
                が全射であることが従う.
                \item[(c)$\Rightarrow$(b)]
                $\iota^\ast: V(\mathfrak{q}) \to V(\iota^{-1}(\mathfrak{q}))$が全射であることを示せば十分である.
                任意の$\mathfrak{p} \in V(\iota^{-1}(\mathfrak{q}))$
                に対して, $g^\ast(\mathfrak{p}) \in V(f^\ast(\mathfrak{q}))$であり,
                仮定より, ある$\mathfrak{p}_0 \in V(\mathfrak{q})$が存在して,
                $f^\ast(\mathfrak{p}_0) = g^\ast(\mathfrak{p})$となる.
                ここで, $g$が全射であることから,
                \[
                    \iota^{\ast}(\mathfrak{p}_0) = g(f^\ast(\mathfrak{p}_0)) = g(g^\ast(\mathfrak{p}))= \mathfrak{p}
                \]
                となるので, $\iota^\ast$は全射となる.
            \end{description}
            \item \begin{description}
                \color{red}わかんね\color{black}
            \end{description}
        \end{enumerate}
    \end{problem}

    \begin{problem}
        5.10と3.18より, すぐに従う.
    \end{problem}

    \begin{problem}
        $a \in A$に対して, $f(X) = \prod_{\sigma \in G}(X-\sigma(a))$とすれば, $1 \in G$なので,
        $f(a) = 0$である.
        また, $f(X)$の係数は$\{\sigma(a)\}_{\sigma \in G}$の基本対称式で表せるので,
        $f \in A^G[X]$となるので, $A$は$A^G$上整である.

        次に, $G$の$S^{-1}A$への作用を$\sigma \in G$と$a/s \in S^{-1}A$に対して,
        $\sigma \cdot (a/s) = \sigma(a)/\sigma(s)$と定める.
        今, $\sigma(S) \subseteq S$を仮定しているので,
        この作用はwell-definedである.
        このとき,
        \[
            \phi: (S^{G})^{-1}A^{G} \ni a/s \longrightarrow a/s \in (S^{-1}A)^G
        \]
        と定める.
        $a/s = b/t \in (S^G)^{-1}A^G$とすれば,
        ある$u \in S^G$が存在して, $u(at-bs) = 0$となるが,
        このとき, 特に$u \in S^G \subseteq S$なので, $a/s = b/t \in (S^{-1}A)^G$が成り立つ.
        ゆえに, この写像はwell-definedである.
        次に$\phi$の逆写像を
        \[
            \psi: (S^{-1}A)^G \ni a/s \longrightarrow b/t \in (S^G)^{-1}A^G
        \]
        と定めれば, $a/s = b/t \in (S^{-1}A)^G$のとき,
        ある$u \in S$が存在して, $u(at-bs) = 0$となるが,
        $u_0 = \prod_{\sigma \in G} \sigma(u) \in S^{G}$について,
        $u_0(at-bs) = 0$となるので, $a/s = b/t \in (S^{G})^{-1}A^G$が成り立つ.
        ゆえに, この写像もwell-definedである.
        $\phi, \psi$は明らかに環の射であって, 互いに逆写像をなすので,
        $(S^{-1}A)^G \cong (S^G)^{-1}A^G$が成り立つ.
    \end{problem}

    \begin{problem}
        $\mathfrak{q}_1, \mathfrak{q}_2 \in P$とする.
        $x \in \mathfrak{q}_1$について,
        \[
            \prod_{\sigma \in G}\sigma(x) \in \mathfrak{q}_1 \cap A^G = \mathfrak{p} \subseteq \mathfrak{q}_2
        \]
        となるので,
        ある$\sigma \in G$が存在して, $\sigma(x) \in \mathfrak{q}_2$が成り立つ.
        つまり,
        \[
            \mathfrak{q}_1 \subseteq \bigcup_{\sigma \in G} \sigma(\mathfrak{q}_2)
        \]
        となる.
        ここで, (1.11)より, ある$\sigma \in G$が存在して,
        $\mathfrak{q}_1 \subseteq \sigma(\mathfrak{q}_2)$となる.
        今, $\sigma$が全単射であることと, $\mathfrak{p} \subseteq A^G$であることから,
        \[
            \mathfrak{p} = \sigma(\mathfrak{p}) = \sigma(\mathfrak{q}_2 \cap A^G) = \sigma(\mathfrak{q}_2) \cap A^G
        \]
        となるので, $\sigma(\mathfrak{q}_2)$の$A^G$への縮約は$\mathfrak{p}$である.
        これと, $\mathfrak{q}_1 \subseteq \sigma(\mathfrak{q}_2)$より,
        (5.9)を使えば, $\mathfrak{q}_1 = \sigma(\mathfrak{q}_2)$
        となる.
        このとき, $\mathfrak{q}_1, \mathfrak{q}_2 \in P$は任意にとっているので,
        $G$は$P$状に推移的に作用し,
        特に$G$は有限集合なので, $P$は有限集合である.
    \end{problem}

    \begin{problem}
        $\sigma \in G$を任意にとる.
        $x \in \sigma(B)$とすれば, ある$x_0 \in B$が存在して, $\sigma(x_0) = x$となる.
        ここで, $x_0 \in B  = \overline{A}^L$なので,
        ある$a_i \in A$が存在して,
        \[
            x_0^n + a_1 x_0^{n-1} + \cdots + a_n = 0
        \]
        となる.
        ゆえに,
        \[
            \sigma(x^n + a_1 x^{n-1} + \cdots + a_n) = 0
        \]
        となるが, $\sigma$は特に単射なので,
        \[
            x^n + a_1 x^{n-1} + \cdots + a_n = 0
        \]
        が成り立つ.
        これは, $x \in \sigma(B) \subseteq L$が$A$上整であることを意味するので,
        $x \in B$となる.
        逆に,
        $x \in B$とすれば, $\sigma: L \to L$が全単射であることから,
        ある$x_0 \in L$が存在して, $\sigma(x_0) = x$となる.
        このとき,
        \[
            \sigma(x_0)^n + a_1 \sigma(x_0)^{n-1} + \cdots + a_n = 0
        \]
        となるので, $\sigma$の単射性から,
        \[
            x^n_0 + a_1 x^{n-1}_0 + \cdots + a_n = 0
        \]
        となる.
        ゆえに, $x_0 \in \overline{A}^L = B$となる.
        このとき, $x = \sigma(x_0) \in \sigma(B)$となるので, $\sigma(B) = B$が成り立つ.

        次に$A = B^G$であることを示す.
        $G = \Gal(L/K)$なので, $A \subseteq B^G$はすぐに従う.
        $x \in B^G \subseteq L^G = K$であって,
        $x \in B^G \subseteq B$なので, $x$は$A$上整である.
        また, 特に$x \in K$であって, $A$は整閉なので, $x \in A$が成り立つ.
        ゆえに, $B^G \subseteq A$となり, $B^G = A$が成り立つ.
    \end{problem}

    \begin{problem}
        任意の代数拡大$L/K$について,
        ある中間体$M$が存在して,
        $L/M$は純分離拡大, $M/K$は拡大になる.
        ゆえに, 分離拡大の場合と純非分離拡大の場合について示されれば,
        $M$における$A$の整閉包を$B$, $L/M$における$B$の整閉包を$C$として,
        \[
            \Spec{C} \longrightarrow \Spec{B} \longrightarrow \Spec{A}
        \]
        は有限なファイバーをもつ射の合成なので, 有限なファイバーをもつ.
        したがって, 分離拡大の場合と純非分離拡大の場合について示す.

        \begin{enumerate}
            \item 分離拡大の場合,
            \color{red}
            $L$が$K$上分離的な場合, $L$の正規閉包を$N$とすれば,
            $N/K$は分離的な有限次正規拡大である.
            \color{black}
            $N$における$B$の整閉包を$C$として, $G = \Gal(N/K)$とすれば,
            5.14より, $A = C^G$が成り立つ.
            また, 5.13より,
            \[
                f^\ast: \Spec{C} \longrightarrow \Spec{C^G} = \Spec{A}
            \]
            は有限なファイバーをもつ.
            ここで, $g^\ast: \Spec{C} \to \Spec{B}$, $h^\ast: \Spec{B} \to \Spec{A}$
            とする.
            $B/A$は整拡大であって, $B \subseteq C$なので, 整拡大の推移性から,
            $C/B$は整拡大である.
            ゆえに,
            (5.10)より, $g^\ast$は全射であり,
            任意の$\mathfrak{p} \in \Spec{A}$について,
            \[
                {f^{\ast}}^{-1}(\mathfrak{p}) = (h^\ast \circ g^\ast)^{-1}(\mathfrak{p}) = {g^\ast}^{-1}({h^\ast}^{-1}(\mathfrak{p}))
            \]
            が成り立つ.
            また, $g^\ast$は全射なので, $g^\ast({f^\ast}^{-1}(\mathfrak{p})) = h^\ast(\mathfrak{p})$
            であり, ${f^\ast}^{-1}(\mathfrak{p})$は有限なので, ${h^\ast}^{-1}(\mathfrak{p})$
            も有限である.
            \item
            \color{red}
            わかんね。
            \color{black}
        \end{enumerate}
    \end{problem}

    \begin{lemma}\label{lem: 無限体係数の多項式の零元}
        $k$が無限体のとき, $f \in k[X_1, \dots, X_n]$について,　任意の$a \in k^n$について, $f(a) = 0$であることと, $f = 0$は同値.
    \end{lemma}
    \begin{proof}
        $f = 0$なら任意の$a \in k^n$について, $f(a) = 0$であることは自明なので, 逆を示す.

        $n = 1$のとき, 任意の$a \in k$に対して, $f(a) = 0$である.
        このとき, $k$が無限体であることから, $f$は無限個の根をもつことになる.
        しかし, $\deg{f} > 0$なら$f$は高々$\deg{f}$個の根しかもたないことから,
        $\deg{f} = 0$となり, $f = 0$が従う.

        次に, $n-1$以下で主張が成り立つとし,
        \[
            f(X_1, \dots, X_n) = \sum_{i = 0}^m f_i(X_1, \dots, X_{n-1})X_n^{i-1}
        \]
        とおく.
        $a_1, \dots, a_{n-1} \in k$を任意にとり,
        \[
            g(X_n) := f(a_1, \dots, a_{n-1}, X_n)
        \]
        とすれば, $g \in k[X_n]$である.
        しかし, 任意の$a_n \in k$について, $g(a_n) = 0$となるので,
        仮定より$g = 0$である.
        ゆえに, 任意の$i$について, $f_i(a_1, \dots, a_{n-1}) = 0$となる.
        これは任意の$a_i \in k$について成り立つので, 仮定より$f_i = 0 \in k[X_1, \dots, X_{n-1}]$.
        したがって, $f = 0 \in k[X_1, \dots, X_n]$が成り立つ.
    \end{proof}

    \begin{problem}
        \begin{enumerate}
            \item $k$が無限体の場合,
            $x_1, \dots, x_n \in A$を$k$代数として$A$を生成する元とする.
            必要なら添え字をとりなおすことにより,
            $\set{x_1, \dots, x_r}$が$k$上代数独立であり, $x_{r+1}, \dots, x_n \in k[x_1, \dots, x_r]$上代数的としてよい.
            $n-1$以下で主張が成り立つと仮定して, $n$の場合に証明する.

            $n = r$のときには, $y_i = x_i$とすることにより, 主張は明らかに成り立つので,
            $r < n$としてよい.
            このとき, $x_n$が$k[x_1, \dots, x_{n-1}]$上代数的なので,
            ある$f \in k[X_1, \dots, X_n] \setminus \set{0}$が存在して,
            $f(x_1, \dots, x_n) = 0$となる.
            \[
                f(X) = \sum_{k = 0}^m f_i(X)
            \]
            とおく.
            ただし, $f_i$は$i$次の斉次多項式であって,
            $f_m(X) \neq 0$を満たす.
            \cref{lem: 無限体係数の多項式の零元}より, ある$\lambda = (\lambda_1, \dots, \lambda_{n-1}, 1) \in k^n$が存在して,
            $f_m(\lambda) \neq 0$が成り立つ.
            実際,
            \[
                f_m(X) = \sum_{i = 0}^m g_{i}(X_1, \dots, X_{n-1})X_n^m
            \]
            とおけば,
            \[
                g(X_1, \dots, X_{n-1}) := f_m(X_1, \dots, X_{n-1}, 1) = \sum_{i = 0}^l g_i(X_1, \dots, X_{n-1})
            \]
            が成り立つ.
            ここで, $g = 0$とおく.
            このとき, $g_i$は次数$m-i$の斉次多項式なので, $g = 0$より, $g_i = 0$となり,
            $f_m \neq 0$に反する.
            したがって, $g \neq 0 \in k[X_1, \dots, X_{n-1}]$であり,
            \cref{lem: 無限体係数の多項式の零元}を使えば, ある$\lambda_1, \dots, \lambda_{n-1} \in k$が存在して,
            \[
                f_m(\lambda_1, \dots, \lambda_{n-1}, 1) = g(\lambda_1, \dots, \lambda_{n-1}) \neq 0
            \]
            が成り立つ.

            $1 \leq i \leq n-1$に対して, $x'_i = x_i - \lambda_i x_n$とおく.
            このとき, $s = f_m(\lambda_1, \dots, \lambda_{n-1}, 1) \neq 0$とすれば,
            $s$は$f(x_1' + \lambda_1x_n, x_{n-1}' + \lambda_{n-1}x_n, x_n)$における
            $x_n^m$の係数である.
            したがって,
            $x_n$はモニック多項式
            \[
                s^{-1}f(x_1' + \lambda_1X_n,x_{n-1}' + \lambda_{n-1}X_n, X_n) \in k[x'_1, \dots, x'_{n-1}][X_n]
            \]
            の根である.
            以上より, $x_n$は$A' := k[x'_1, \dots, x'_{n-1}]$上整.
            さらに, $A$における$A'$の整閉包を$C$とすれば,
            任意の$1 \leq i \leq n-1$について,
            $x_i' = x_i - \lambda_ix_n \in C$かつ$x_n \in C$であって, (5.3)より, $C$は環なので,
            $x_i \in C$となる.
            ゆえに, $A = C$となり, $A$は$A'$上整である.
            最後に, $A'$は$n-1$個の元で生成される$k$-代数なので, 帰納法の仮定より,
            ある代数独立な集合$\set{y_1, \dots, y_r} \subseteq A'$が存在して,
            $A'$は$k[y_1, \dots, y_r]$上整である.
            したがって, 整拡大の推移性から, $A$は$k[y_1, \dots, y_r]$上整である.
            \item $k$を任意の体とする.

            $d > \deg{f}$とする.
            $x_i' = x_i - x_n^{d^i}$とおく.
            このとき, $\alpha, \beta \in \mathbb{N}^n$を多重指数とすれば,
            $\alpha \neq \beta$のとき, $x^\alpha$と$x^\beta$における$x_n$の次数は異なることに注意する.
            ここで, $f(X) = \prod_{\alpha} c_{\alpha} X^\alpha$とすれば,
            \[
                f(x_1' + x^{d^1}, \dots, x_{n-1}' + x^{d^{n-1}}, x_n) = \prod_{\alpha} c_\alpha x_n^{\alpha_n} \prod_{i = 1}^{n-1} (x_i' + x_n^{d^i})^{\alpha_i}
            \]
            が成り立つ.
            各$\alpha$について, $x_n$の次数は異なるので, その次数が最大になるような$\alpha$を$\alpha_0$とおく.
            このとき,
            \[
                \alpha_0^{-1}f(x_1' + X^{d^1}_n, \cdots, x_{n-1}' + X_n^{d^{n-1}}, X_n) \in k[x'_1,\dots,x'_{n-1}, X_n]
            \]
            は$x_n$を根に持つモニック多項式である.
            したがって, $x_n$は$A' := k[x_1', \dots, x_{n-1}']$上整である.
            さらに, $A$における$A'$の整閉包を$C$とすれば,
            任意の$1 \leq i \leq n-1$について,
            $x_i' = x_i - x_n^{d^i} \in C$かつ$x_n \in C$であって, (5.3)より, $C$は環なので,
            $x_i \in C$となる.
            ゆえに, $A$は$A'$上整である.
            最後に, $A'$は$n-1$個の元で生成される$k$-代数なので, 帰納法の仮定より,
            ある代数独立な集合$\set{y_1, \dots, y_r} \subseteq A'$が存在して,
            $A'$は$k[y_1, \dots, y_r]$上整である.
            したがって, 整拡大の推移性から, $A$は$k[y_1, \dots, y_r]$上整である.
        \end{enumerate}
        \color{red}
        幾何学的解釈についてはわからん。
        \color{black}
    \end{problem}

    \begin{problem}
        $I(X) \neq (1)$ならば, $X \neq \emptyset$であることを示す.
        $X = \emptyset$とする.
        任意の$f \in k[X_1, \dots, X_n]$をとれば,
        $X$のすべての点に対して, $f$は$0$となるので, $f \in I(X)$.
        ゆえに, $I(X) = (1)$.

        $k[X_1, \dots, X_n]$の極大イデアルは$a_i \in k$として,
        $(X_1 -a_1, \dots, X_n - a_n)$と表されることを示す.
        $\mathfrak{m} \subseteq k[X_1, \dots, X_n]$を極大イデアルとする.
        このとき, $F := k[X_1, \dots, X_n]/\mathfrak{m}$は有限生成$k$-代数である.
        したがって, 5.16より,
        ある$k$上代数独立な集合$\set{f_1, \dots, f_r} \subseteq F$が存在して,
        $F$は$k[f_1, \dots, f_r]$上整である.
        また, $F$は体なので, (5.7)より, $k[f_1, \dots, f_r]$は体である.
        しかし, $\set{f_1, \dots, f_r} \subseteq F$は$k$上代数独立なので,
        $F$は$k$上整である.
        \color{red}
        (ネーターの正規化定理において, $A = k$とすると変な感じになるので, あのステートメントは不完全な気がする.
        あれを使った上手い書き方がわからない.
        実際には$r$は超越次数で決まるので, そっちだと思えばよい.)
        \color{black}
        これは$F/k$が代数拡大ということを意味するので, $k$が代数閉体であることから,
        $F = k$が成り立つ.
        ここで, $F$が有限生成$k$-代数であることから全射
        \[
            \phi: k[X_1, \dots, X_n] \longrightarrow F = k
        \]
        が存在する.
        このとき,
        $\phi(X_i) = a_i$とすれば, $(X_1-a_1, \dots, X_n - a_n) \subseteq \mathfrak{m}$が成り立つ.
        最後に, $(X_1 - a_1, \dots,X_n - a_n) \subseteq k[X_1, \dots, X_n]$が
        極大イデアルであることを示す.
        $X_i \mapsto X_i + a_i$という自己同型を考えることにより, $a_i = 0$としてよい.
        つまり, $(X_1, \dots, X_n) \subseteq k[X]$が極大イデアルであることを示せばよい.
        しかし, $f \notin (X_1, \dots, X_n)$とすれば, $f(0) \neq 0 \in k$となる.
        ゆえに, $(X_1, \dots, X_n) \subseteq k[X]$は極大イデアルである.
        以上より, $k[X_1, \dots, X_n]$の極大イデアルは$(X_1 -a_1, \dots, X_n-a_n)$という形をしていることが示された.
    \end{problem}

    \begin{problem}
        $B$の任意の元が$k$上代数的であることを示せば十分である.
        5.16より, ある代数独立な集合$\set{y_1, \dots, y_r} \subseteq B$が存在して,
        $B$は$k[y_1, \dots, y_r]$上整となるが,
        (5.7)より, $k[y_1, \dots, y_r]$は体となるので,  $B$は$k$上整である.
        これは$B$の任意の元が$k$上代数的であることを意味するので, 主張が成り立つ.
    \end{problem}

    \color{red}
        恐らく, 5.17の後半の主張を示すことを求められていそうなので, そうする.
        ほぼ同じ証明になってしまったが......?
    \color{black}

    \begin{problem}
        $\mathfrak{m} \subseteq k[X] = k[X_1, \dots, X_n]$を極大イデアルとする.
        $B := k[X_1, \dots, X_n]/\mathfrak{m}$とすれば, これは有限生成$k$-代数かつ体である.
        5.18より, $B/k$は有限次拡大となるので,
        $k$が代数閉体であることから, $B = k$が成り立つ.
        ここで, $B$が有限生成$k$-代数であることから全射
        \[
            \phi: k[X_1, \dots, X_n] \longrightarrow B = k
        \]
        が存在する.
        このとき,
        $\phi(X_i) = a_i$とすれば, $(X_1-a_1, \dots, X_n - a_n) \subseteq \mathfrak{m}$が成り立つ.
        また, $(X_1 -a_1, \dots, X_n - a_n)$は極大イデアルなので, 主張が成り立つ.
    \end{problem}

    \begin{problem}
        $S =  A \setminus \set{0}$とする.
        このとき, $B$は有限生成$A$-代数なので, $S^{-1}B$は有限生成$K:= \Quot{A}$代数である.
        5.16より,
        $K$上代数独立な集合$\set{y_1'/s_1, \dots, y_n'/s_n} \subseteq S^{-1}B$が存在して,
        $S^{-1}B$が$K[y_1'/s_1, \dots, y_n'/s_n]$上整になる.
        ここで, $z_1, \dots, z_m \in B$を$A$-代数としての$B$の生成元とする.
        このとき, $z_i / 1 \in S^{-1}B$は$K[y_1'/s_1, \dots, y_n'/s_n]$上整なので,
        あるモニックな$f_i \in K[y_1'/s_1, \dots, y_n'/s_n][X]$が存在して, $f_i(z_i/1) = 0$となる.
        $\alpha_{i,j} \in \mathbb{N}$を多重指数, $c_{i,j}/t_{i,j} \in K$として,
        \[
            f_i(X) = \sum_{j} \sum_{\alpha_{i,j}} \frac{c_{i,j}}{t_{i,j}} \frac{{y'}^{\alpha_{i,j}}}{s^{\alpha_{i,j}}} X^j
        \]
        とおく.
        さらに, $\alpha$を$i,j$を動かしたときの$\alpha_{i,j}$の各成分についての最大値として定める.
        また,
        \[
            s := s^\alpha, \quad \quad t := \prod_{i,j} t_{i,j}
        \]
        とおけば,
        \[
            sf_i(X) = \sum_{j} \sum_{\alpha_{i,j}}  t'_{i,j} c_{i,j} {y'}^{\alpha_{i,j}}{s^{\alpha-\alpha_{i,j}}} X^j
        \]
        となる.
        ただし, $t'_{i,j} = t/t_{i,j} \in S$である.
        このとき, $y^{\alpha_{i,j}} := y'^{\alpha_{i,j}}s^{\alpha-\alpha_{i,j}}, d_{i,j} := t'_{i,j}c_{i,j}$
        とすれば, $y'_i/s_i$が$K$上代数独立であることから, $y_1, \dots, y_n$は$A$上代数独立である.
        また,
        \[
            sf_i(X) := \sum_{j} d_{i,j}y^{\alpha_{i,j}}X^j \in A[y_1, \dots, y_n][X] = B'[X]
        \]
        は$sf_i(z_i) = 0$を満たす.
        ここで, $sf_i \in B'[X]$であることから, $f_i \in B_s'[X]$となるので,
        $z_i/1 \in B_s$は$B'_s$上整である.
        また, $B_s$は$B'_s$-代数として, $z_i/1$で生成され,
        整元の和と積はまた整元なので, $B_s$は$B_s'$上整である.
    \end{problem}

    \color{red}
    次は翻訳版のステートメントが少し変な気がするので, 原著のステートメントで解く.
    \color{black}

    \begin{problem}
        5.20より, $A$上代数独立な集合$\set{y_1, \dots, y_n} \subseteq B$が存在して,
        と$s \in A$が存在して, $B_s$は$B'_s$上整である.
        ただし, $B' = A[y_1, \dots, y_n]$である.
        このとき, $y_i \mapsto 0$とすることにより, $f: A\to \Omega$を$B' \to \Omega$に拡張できる.
        さらに, $f(s) \neq 0$なので, $1/s \mapsto 1/f(s)$とすることにより, $B'_s \to \Omega$に拡張できる.
        最後に, $B_s' \subseteq B_s$であることから,
        5.2より, $f$は$B_s \to \Omega$に拡張できる.
    \end{problem}

    \begin{problem}
        $v \in B \setminus \set{0}$を任意に取り, $v$を含まない$B$の極大イデアル
        が存在することを示せば十分である.
        $B$は整域なので, $A \subseteq B_v$としてよく, $B_v$もまた整域であって,
        有限生成$A$-代数である.
        ここで, 5.21によって存在が保証される$s \in A$をとる.
        $J(A) = 0$より, $A$のある極大イデアル$\mathfrak{m}$が存在して, $s \notin \mathfrak{m}$を満たす.
        \[
            f: A \to A/\mathfrak{m} =: k \emb \overline{k} =: \Omega
        \]
        について, $f(s) \neq 0$なので, 5.21より, $g: B_v \to \Omega$に拡張できる.
        このとき, $v/1 \in B_v$は単元で, 単元の像は単元なので, $g(v/1) \neq 0$であることに注意する.
        ゆえに, $\mathfrak{n} \cap B := \ker{g} \cap B$が$B$の極大イデアルであれば, 主張が成り立つ.
        まず, $\ker{g} \cap A = \mathfrak{m}$なので,
        $k = A/\mathfrak{m} \subseteq B_v/\mathfrak{n}$とみなせる.
        これに加えて, 準同型定理によって$B_v/\mathfrak{n} \subseteq \Omega$とみなせるので,
        代数拡大の中間にある環は体であることから, $\mathfrak{n}$は極大イデアルである.
        さらに, $\mathfrak{n} \cap A$は極大イデアルであって,
        なので, $B/A$が整拡大であることと, (5.8)より, $\mathfrak{n} \cap B$は$B$の極大イデアルである.
        したがって, 主張が示された.
    \end{problem}

    \color{red}
    ii)で, 零環に対する準同型の像は除かないとダメな気がしている.
    それを仮定します.
    \color{black}

    \begin{problem}
        \begin{description}
            \item[i) $\Rightarrow$ iii)] 明らか.
            \item[ii) $\Rightarrow$ i)] 対偶を示す.
            $\mathfrak{p} \in \Spec{A}$をi)を満たさない素イデアルとする.
            つまり,
            \[
                \mathfrak{p} \subsetneq \bigcap_{\mathfrak{p} \subseteq \mathfrak{m}} \mathfrak{m}
            \]
            とする.
            ただし, $\mathfrak{m}$は$A$の極大イデアルである.
            このとき, $J(A/\mathfrak{p}) \neq 0$であって, $A/\mathfrak{p}$は整域なので,
            \[
                A \longrightarrow  A/\mathfrak{p}
            \]
            という射の像において, $J(A/\mathfrak{p}) \neq \sqrt{0_{A/\mathfrak{p}}}$となるので, 対偶が成り立つ.
            \item[iii) $\Rightarrow$ ii)]
            ii)が成り立たないと仮定すれば, $f(A) \neq 0$となるような環の射$f$が存在して,
            $\sqrt{0_{f(A)}} \subsetneq J(f(A))$
            となる.
            ここで, $x \in J(f(A)) \setminus \sqrt{0_{f(A)}}$をとる.
            このとき, ある極大でない素イデアル$\mathfrak{q} \in \Spec{f(A)}$が存在して,
            $x \notin \mathfrak{q}$を満たす.
            $\mathfrak{p} = f^{-1}(\mathfrak{q})$とする.
            $x \notin \mathfrak{q}$より, $f^{-1}(x) \cap \mathfrak{p} = \emptyset$であり,
            $f(A) \cong A/\ker{f}$とイデアルの対応関係を考えれば,
            任意の$\mathfrak{m} \in \Max{A}$について,
            $\ker{f} \subseteq \mathfrak{m}$であって,
            $f^{-1}(x) \cap \mathfrak{m} \neq \emptyset$が成り立つ.
            $a \in f^{-1}(x) \cap \mathfrak{m}$とすれば,
            \[
                f^{-1}(x) = a + \ker{f}
            \]
            であることから,
            $f^{-1}(x) \subseteq \mathfrak{m}$が成り立つ.
            今, $\mathfrak{m}$は任意なので,
            $f^{-1}(x) \subseteq j(A)$となるが,
            このとき,
            \[
                f^{-1}(x) \subseteq J(A) \setminus \mathfrak{p}
            \]
            となるので, iii)に反する.
            したがって, 対偶をとれば, 主張が従う.
        \end{description}
    \end{problem}

    \begin{lemma}
        Jacobson環$A$の環の射$f$による像はJacobson環.
    \end{lemma}
    \begin{proof}
        $f(A) \cong A/\ker{f}$なので, Jacobson環の剰余環がJacobson環であることを示せば十分である.
        $A$のイデアルを$I$とし, $\mathfrak{p}/I \in \Spec{A/I}$を任意にとる.
        このとき, $A$がJacobson環であることから,
        \[
            \mathfrak{p} = \bigcap_{\mathfrak{p} \subseteq \mathfrak{m} \in \Max{A}} \mathfrak{m}
        \]
        となるが, 剰余環のイデアルとの対応関係から,
        \[
            f^{-1}(\mathfrak{p}/I) = \mathfrak{p} = \bigcap_{\mathfrak{p} \subseteq \mathfrak{m} \in \Max{A}} \mathfrak{m} = \bigcap_{\mathfrak{p}/I \subseteq \mathfrak{m}/I \in \Max{A}} f^{-1}(\mathfrak{m}/I) = f^{-1}\qty( \bigcap_{\mathfrak{p}/I \subseteq \mathfrak{m}/I \in \Max{A}} f^{-1}(\mathfrak{m}/I))
        \]
        となるが, $f$は全射なので,
        \[
            \mathfrak{p}/I = \bigcap_{\mathfrak{p}/I \subseteq \mathfrak{m}/I \in \Max{A}} f^{-1}(\mathfrak{m}/I)
        \]
        が成り立つ.
        したがって, 5.23より, 剰余環はJacobson環であって, $f(A)$もJacobson環になる.
    \end{proof}

    \color{red}
    $A$-代数$B$について, 整というのは, $f(A) \subseteq B$として整ということだっけ？
    \color{black}

    \begin{problem}
        \begin{enumerate}
            \item $B$が$A$上整と仮定する.
            補題より, $f(A) \subseteq B$はJacobson環なので, $A \subseteq B$としてよい.
            $\mathfrak{q} \in \Spec{B}$を任意にとり,
            \[
                \mathfrak{q} = \bigcap_{\mathfrak{q} \subseteq \mathfrak{n} \in \Max{B}} \mathfrak{n}
            \]
            となることを示せばよい.
            $\mathfrak{p} := A \cap \mathfrak{q}$とすれば,
            $A$がJacobson環であることから,
            \[
                \mathfrak{p} = \bigcap_{\mathfrak{p} \subseteq \mathfrak{m} \in \Max{A}} \mathfrak{m}
            \]
            となる.
            ここで,
            (5.11)より,
            任意の$\mathfrak{m} \supseteq \mathfrak{p}$について,
            ある$\mathfrak{n} \supseteq \mathfrak{q}$が存在して, $\mathfrak{n} \cap A = \mathfrak{m}$が成り立つ.
            このような$\mathfrak{n}$の共通部分をとれば,
            \[
                \mathfrak{q} \subseteq \bigcap \mathfrak{n} =: \mathfrak{q}'
            \]
            となるが,
            \[
                \mathfrak{q}' \cap A  = \bigcap_{\mathfrak{p} \subseteq \mathfrak{m} \in \Max{A}} \mathfrak{m} = \mathfrak{p} = \mathfrak{q} \cap A
            \]
            となるので, (5.9)より,
            $\mathfrak{q}' = \mathfrak{q}$となる.
            したがって, $B$はJacobson環となり, 対偶をとれば, 主張が示された.
            \item $A \subseteq B$としてよい.
            $\mathfrak{q} \in \Spec{B}$とすれば, $B /\mathfrak{q}$は有限生成$A/A \cap \mathfrak{q}$-代数である.
            $A$はJacobson環なので, $A/A \cap \mathfrak{q}$もJacobson環であり,
            $A/A \cap \mathfrak{q}$は整域なので,
            $J(A/A\cap\mathfrak{q}) = \sqrt{0_{A/A\cap\mathfrak{q}}} = 0$が成り立つ.
            このとき, 5.22より, $J(B/\mathfrak{q}) = 0$が成り立つ.
            $\mathfrak{q}$を含む$B$の極大イデアルは$B/\mathfrak{q}$の極大イデアルと一対一に対応するので,
            \[
                \mathfrak{q} = \bigcap_{\mathfrak{q} \subseteq \mathfrak{m} \in \Max{B}} \mathfrak{m}
            \]
            となる.
            今, $\mathfrak{q} \in \Spec{B}$は任意なので,
            $B$はJacobson環になる.
        \end{enumerate}
    \end{problem}

    \begin{note}
        Jacobson環の剰余環, 像, 性拡大, 有限次拡大はJaconbson環.
    \end{note}

    \begin{lemma} \label{lem: 有限ならば整}
        有限$A$-代数$B$は$A$上整.
    \end{lemma}
    \begin{proof}
        任意の$x \in B$について, $f(A)[x] \subseteq B$であるから, $f(A)[x]$は有限生成$A$-加群である.
        ゆえに, (5.1)より, 主張が成り立つ.
    \end{proof}

    \begin{problem}
        \begin{description}
            \item[i) $\Rightarrow$ ii)]
            $s \in f(A) \setminus \set{0}$を
            5.21で存在が保証されているようなものとする.
            $f(A)$はJacobson環であって, 体$B$の部分環として整域なので,
            $J(f(A)) = \sqrt{0_{f(A)}}$が成り立つ.
            これより, ある$\mathfrak{m} \in \Max{f(A)}$で, $s \notin \mathfrak{m}$を満たすものが存在する.
            環の射$f(A) \to f(A)/\mathfrak{m} = k$を考えれば, 5.21より, これは$g:B \to \overline{k}$へ拡張される.
            $B$は体なので, (1.2)より$g$は単射である.
            ゆえに, $g(B) \cong B$.
            したがって, $g(B)$は体かつ有限生成$A$-加群である.
            5.18より, $g(B)$は有限次代数拡大体, つまり, $k$-線形空間なので, 有限$k$-代数である.
            \item[ii) $\Rightarrow$ i)]
            $\mathfrak{p} \in \Spec{A}$を極大でない素イデアルとする.
            これが
            \[
                \mathfrak{p} = \bigcap_{\mathfrak{p} \subsetneq \mathfrak{q}} \mathfrak{q}
            \]
            を満たすことを示す.
            そのためには, イデアルの対応関係から, $B = A/\mathfrak{p}$として,
            \[
                \bigcap_{\mathfrak{q} \in \Spec{B}\setminus\set{0}} \mathfrak{q} = 0
            \]
            であることを示せば十分である.
            つまり, 任意に$f \in B \setminus \set{0}$をとり, ある$\mathfrak{q} \in \Spec{B} \setminus \set{0}$が存在して, $f \notin \mathfrak{q}$を示す.
            $B_f$は有限生成$B$-代数なので, 全射$A \to B$を考えれば, $B_f$は有限生成$A$-代数である.
            $B_f$が体ならば, 仮定より$B_f$は$B$上有限であり, \cref{lem: 有限ならば整}より, $B_f/B$は整拡大になる.
            このとき, (5.7)より, $B$は体である.
            しかし, $B = A/\mathfrak{p}$で, $\mathfrak{p}$は極大イデアルではないので,
            これは矛盾.
            したがって, $B_f$は体ではない.
            このとき, $B_f$は零ではない素イデアル$\mathfrak{q}'$をもつ.
            $B \to B_f$による$\mathfrak{q}$の縮約を$\mathfrak{q}$とすれば, $f \notin \mathfrak{q}$を満たす.
            したがって, 5.23より, $A$はJacobson環である.
        \end{description}
    \end{problem}


    \begin{problem}
        局所閉集合$A = E \cap V$について,
        \[
            A = E \cap V \cap \overline{A} = V \cap \overline{A}
        \]
        となるので, 閉包の中で開集合.

        逆に, $A$が$\overline{A}$の中で開集合と仮定すれば, 部分位相の定義より, $A$は開集合と$\overline{A}$との共通部分になる.
        \begin{description}
            \item[(1) $\Rightarrow$ (2)]
            $E$を閉集合として, $x \in E$とする.
            $N$を$x$の開近傍とすれば,
            \[
                (N \cap E) \cap X_0 \neq \emptyset
            \]
            となるので, $N$が任意であることから,
            $x \in \overline{E \cap X_0}$が成り立つ.
            ゆえに, $E \subseteq \overline{E \cap X_0}$.
            逆に,
            \[
                \overline{E \cap X_0} \subseteq \overline{E} = E
            \]
            なので, $\overline{E \cap X_0} = E$が成り立つ.
            \item [(2) $\Rightarrow$ (3)]
            部分位相の定義から, 全射であることは明らか.
            $U \cap X_0 = V \cap X_0$と仮定する.
            このとき,
            $(X \setminus U) \cap X_0 = (X \setminus V) \cap X_0$となるので,
            特に
            \[
                X \setminus U = \overline{(X \setminus U) \cap X_0} = \overline{(X \setminus V) \cap X_0} = X \setminus V
            \]
            であり,
            したがって, $U = V$となる.
            \item [(3) $\Rightarrow$ (1)]
            $A$を局所閉集合とする.
            定義より, ある閉集合$E$と開集合$V$が存在して, $A = E \cap V$と表せる.
            $A \cap X_0 = \emptyset$とすれば,
            $V \cap X_0 \subseteq X \setminus E$となるので,
            \[
                V \cap X_0 \subseteq V = X_0 \cap V \cap (X \setminus E)
            \]
            となる.
            このとき, (3)より, $v = V \cap (X \setminus E)$となるので,
            $V \subseteq X \setminus$, つまり, $V \cap E = \emptyset$が成り立つ.
            \item [i) $\Rightarrow$ ii)]
            $V(I) \setminus V(J) \neq \emptyset$のとき,
            $(V(I) \setminus V(J)) \cap \Max{A} = \emptyset$であることを示す.
            $\mathfrak{p} \in V(I) \setminus V(J)$とすれば, ある$a \in J$が存在して, $a \notin \mathfrak{p}$であって, $I \subseteq \mathfrak{p}$
            となるので, ある極大イデアル$\mathfrak{m}$が存在して,
            $I \subseteq \mathfrak{m}$かつ$a \notin \mathfrak{m}$を示せば十分である.
            $A$がJacobson環であることから, $A/\mathfrak{p}$もJacobson環であって,
            $A/\mathfrak{p}$は整域なので,
            \[
                J(A/\mathfrak{p}) = \sqrt{0_{A/\mathfrak{p}}} = 0
            \]
            が成り立つ.
            このとき, $\mathfrak{p} \subseteq \mathfrak{m}$なるすべての極大イデアルについて, $a \in \mathfrak{m}$と仮定すれば,
            $\overline{a} = 0 \in A/\mathfrak{p}$となるが,
            剰余環との極大イデアルの対応関係と$A$がJacobson環であることから,
            \[
                a \in \bigcap_{\mathfrak{p} \subseteq \mathfrak{m}} \mathfrak{m} = \mathfrak{p}
            \]
            となり, 矛盾.
            したがって, 主張が成り立つ.
            \item[ii) $\Rightarrow$ iii)]
            $\set{\mathfrak{p}} \subseteq \Spec{A}$が局所閉集合であると仮定する.
            このとき, ある$V(I), V(J) \subseteq \Spec{A}$が存在して,
            \[
                \set{\mathfrak{p}} = V(I) \setminus V(J)
            \]
            が成り立つ.
            仮定より, $\set{\mathfrak{p}} \cap \Max{A} \neq \emptyset$
            なので, $\mathfrak{p} \in \Max{A}$が成り立つ.
            $\Spec{A}$において, $\mathfrak{m}$は閉点なので, $\set{\mathfrak{p}}$が閉集合であることが従う.
            \item [iii) $\Rightarrow$ i)]
            対偶を示す.
            $A$がJacobson環でないと仮定すると, ある極大でない素イデアル$\mathfrak{p} \in \Spec{A}$が存在して,
            \[
                \mathfrak{p} \subsetneq \bigcap_{\mathfrak{q} \supsetneq \mathfrak{p}} \mathfrak{q}
            \]
            となるので, $a \in  \bigcap_{\mathfrak{q} \supsetneq \mathfrak{p}} \mathfrak{q} \setminus \mathfrak{p}$とすれば,
            \[
                \set{\mathfrak{q}} \cap X_a \cap V(\mathfrak{p})
            \]
            は一点からなる局所閉集合になる.
            しかし, iii)より, これは閉集合なので, $\mathfrak{p}$が極大イデアルになって矛盾.
            ゆえに主張が成り立つ.
        \end{description}
    \end{problem}

    \begin{problem}
        $\Sigma$に極大元が存在することを示す.
        まず, $0 \in \Sigma$なので, $\Sigma \neq \emptyset$である.
        $\Lambda \subseteq \Sigma$を全順序集合とする.
        このとき, $\bigcup_{A \in \Lambda} A$は環であって,
        特に局所環になる.
        実際,
        $\mathfrak{m}_A$を局所環$A$の極大イデアルとすれば,
        $\bigcup_{A \in \Lambda} m_A \subseteq \bigcup_{A \in \Lambda} A$
        は真のイデアルであって,
        任意の$a \in\bigcup_{A \in \Lambda} A \setminus \bigcup_{A \in \Lambda} m_A$
        は単元なので, $\bigcup_{A \in \Lambda} m_A$が$\bigcup_{A \in \Lambda} A$の唯一の極大イデアルになる.
        したがって,
        $\bigcup_{A \in \Lambda} A$は局所環であって, $\Sigma$における$\Lambda$の上界である.
        ゆえに, Zornの補題より, $\Sigma$は極大元をもつ.
        \begin{description}
            \item[$\Longrightarrow$] $R \in \Sigma$を極大元とする.
            これが$K$の付値環であることを示す.
            $A \in \Sigma$に対して,
            $f_A: A \emb K \emb \overline{K} = \Omega$とすれば,
            $\Sigma$において,
            \begin{align*}
                A \leq B &\Longleftrightarrow A \subseteq B, \mathfrak{m}_A \subseteq \mathfrak{m}_B\\
                &\Longrightarrow A \subseteq B, f_B|_A = f_A
            \end{align*}
            となるので,
            \[
                A \leq' B \Longleftrightarrow A \subseteq B, f_B|_A = f_A
            \]
            という順序を$\Sigma$という集合に入れると,
            $(\Sigma, \leq')$の極大元は存在して, $R$になる.
            実際, そうでなければ, $(\Sigma, \leq)$の極大元が$R$になることに矛盾する.
            ここで, $(\Sigma, \leq')$は(5.21)での$\Sigma$のうち, 対象の集合を局所環に限定したものであり,
            (5.19)より, (5.21)での$\Sigma$の極大元が局所環であることは保証されているので,
            (5.21)より, $R$は$K$の付値環になる.
            \item[$\Longleftarrow$] $A$を$K$の付値環とする.
            これが$\Sigma$の極大元であることを示す.
            まず, (5.18)より, $A$は特に局所環なので, $A \in \Sigma$である.
            $A$が極大元でないと仮定すれば, ある$B \in \Sigma$が存在して,
            $A \subsetneq B$かつ$\mathfrak{m}_A \subseteq \mathfrak{m}_B$が成り立つ.
            $x \in B \setminus A$とする.
            $x \in B \subseteq K$であって, $A$は$K$の付値環なので,
            $x^{-1} \in A \subseteq B$が成り立つ.
            しかし, $x \notin A$より, $x^{-1} \in A$は単元ではないので,
            $x^{-1} \in \mathfrak{m}_A \subseteq \mathfrak{m}_B$となる.
            これは, $x \in B$が単元であることに反するので, 矛盾.
            したがって, $A$は$\Sigma$の極大元である.
        \end{description}
    \end{problem}

    \begin{problem}
        \begin{description}
            \item[(1) $\Rightarrow$ (2)]
            $\mathfrak{a} \not \subseteq \mathfrak{b}$かつ$\mathfrak{a} \not \subseteq \mathfrak{b}$と仮定する.
            このとき, ある$a \in \mathfrak{a} \setminus \mathfrak{b}$とある$b \in \mathfrak{b} \setminus \mathfrak{a}$が存在する.
            また, 仮定より$A$は付値環なので,
            $a/b \in A$または$b/a \in A$となる.
            一般性を失わずに, $a/b \in A$と仮定してよい.
            しかし, この両辺に$b$をかければ,
            \[
                a = \frac{a}{b}b \in Ab= \mathfrak{b}
            \]
            となるので, 矛盾.
            したがって主張が成り立つ.
            \item[(2) $\Rightarrow$ (1)]
            仮定より, $A$のイデアルは包含関係について全順序なので,
            $A$は局所環である.
            $a/b \in K$を任意に取り, $a/b \in A$または$b/a \in A$であることを示す.
            $K$は$A$の商体なので, $a, b \in A$である.
            ここで, $a,b$のいずれかが単元の場合は明らかに成り立つので,
            そうでないと仮定する.
            さらに, $a,b$で生成される$A$のイデアルを$\mathfrak{a}$,$\mathfrak{b}$とすれば,
            仮定より $\mathfrak{a} \subseteq \mathfrak{b}$または$\mathfrak{b} \subseteq \mathfrak{a}$となる.

            $\mathfrak{a} \subseteq \mathfrak{b}$
            の場合を考える.
            $a = 0$の場合は$a/b = 0 \in A$となって主張が成立するので, $a \neq 0$と仮定してよい.
            このとき, ある$r \in A \setminus \set{0}$が存在して, $a = rb$となるが,
            $a/b, r \in K$は
            \[
                \frac{a}{b}b = a =  rb
            \]
            を満たすので, $r \neq 0$と$K$が整域であることから, $a/b = r \in A$が成り立つ.

            次に, $\mathfrak{b} \subseteq \mathfrak{a}$の場合を考える.
            $a/b \in K$より, $b\neq 0$なので, ある$r \in A \setminus \set{0}$が存在して,
            $b = ra$が成り立つ.
            また, $a \neq 0$であることに注意すれば,
            $b/a, r \in K$が
            \[
                \frac{b}{a}a = b =  ra
            \]
            が成り立つので, $r \neq 0$と$K$が整域であることから, $b/a = r \in A$が成り立つ.
            したがって, 主張が成り立つ.
        \end{description}
        これより, イデアルの対応関係を考えれば, $A_\mathfrak{p}$, $A/\mathfrak{p}$は付値環である.
    \end{problem}

    \begin{definition}
        $B$が$A$の局所環であるとは, ある$\mathfrak{p} \in \Spec{A}$が存在して,
        $B = A_\mathfrak{p}$となることである.
    \end{definition}

    \begin{problem}
        $\mathfrak{p} = \mathfrak{m}_B \cap A$として, $A_\mathfrak{p} = B$が成り立つことを示す.
        任意の$s \in A \setminus \mathfrak{p}$について, $s \notin \mathfrak{m}_B$なので,
        $a \in A$とすれば, $a/s \in B$となる.
        ゆえに, $A_\mathfrak{p} \subseteq B$が成り立つ.

        次に, これを用いて$A_\mathfrak{p} = B$を示す.
        $A$が整域であることから, $A \subseteq A_\mathfrak{p} \subseteq B$とみることができ,
        これより,
        $K \subseteq \Quot{A_\mathfrak{p}} \subseteq K$となるので,
        $\Quot{A_\mathfrak{p}} = K$が成り立つ.
        また, $A$が整域であることから,
        $A_\mathfrak{p}$は整域であって,
        $A_\mathfrak{p}$は$\mathfrak{p}A_\mathfrak{p}$を極大イデアルとしてもつ.
        さらに, $A$が付値環であることと, イデアルの対応関係,
        5.28より, $A_\mathfrak{p}$は付値環である.
        ここで, $\mathfrak{p}A_\mathfrak{p} \subseteq  \mathfrak{m}_B$が成り立つので,
        5.27における$\Sigma$の順序$\leq$について,
        $A_\mathfrak{p} \leq B$が成り立つ.
        また, $A_\mathfrak{p}$と$B$はともに$K$の付値環なので, 5.27より,
        $\Sigma$の極大元である.
        したがって, $B = A_\mathfrak{p}$が成り立つ.
    \end{problem}

    \begin{problem}
        まず, $U$は$A$の積を演算として群であり,
        集合としても$U \subseteq K^\ast$なので, $U$は$K^\ast$の部分群である.

        $\Gamma$の元の代表元の選び方は$U$だけの幅をもつので,
        $\leqslant$はwell-definedである.

        次に$\leqslant$が全順序であることを示す.
        反射律と推移律は自明に成り立ち,
        $x,y$をステートメントのようにとったときに
        $xy^{-1}, yx^{-1} \in A$が成り立つと仮定すれば,
        これらは互いに逆元になるので, 特に
        $xy^{-1} \in U$が成り立つ.
        ここで,
        \[
            xy^{-1}y = x
        \]
        となるので, $\xi = \eta$が成り立つ.
        また, $A$は$K$の付値環なので, 全順序律も成り立つ.
        以上より, $\leqslant$は$\Gamma$に全順序を定める.
        $\leqslant$が$\Gamma$の群構造と整合性をもつことは直ちに従う.

        最後に, $x, y \in K^\ast$に対して, $v(x+y) \geqslant \min(v(x), v(y))$となることを示す.
        $A$は$K$の付値環なので,
        $x/y \in A$または$y/x \in A$が成り立つ.
        \begin{align*}
            v(x+y) \geqslant \min(v(x), v(y))
            &\Longleftrightarrow (x + y)x^{-1} \in A \quad \mbox{or} \quad (x+y)y^{-1} \in A\\
            &\Longleftrightarrow yx^{-1} \in A \quad \mbox{or} \quad xy^{-1} \in A\\
            &\Longleftrightarrow v(y) \geqslant v(x) \quad \mbox{or} \quad v(x) \geqslant v(y)
        \end{align*}
        となるので, $\geqslant$の全順序律から, これは常に成り立つ.
    \end{problem}
\end{document}
